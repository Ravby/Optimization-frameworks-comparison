from mealpy import Problem
import numpy as np


class SumOfSquaresShifted(Problem):
    def __init__(self, bounds=None, minmax="min", name="SumOfSquaresShifted", **kwargs):
        super().__init__(bounds, minmax, **kwargs)
        self.name = name

    shift = np.array([22.479705250884777, 60.75750080751871, -59.15674324461888, 27.56336400934657, -59.29279403989607,
                      -64.68447838216555, 78.33759532500437, -76.51052473538245, -66.6507114149451, 64.93462028133038,
                      -15.23828302367869, -17.825823787619903, -31.92405019180454, 67.72646439056987,
                      -0.9830868197666973,
                      39.91084384292476, 1.4187967568760484, 24.815734535933146, -3.3313494842577285, 18.8446220852682,
                      -17.002497910454828, 50.326561978450655, 53.95001535109091, 18.403170606945253,
                      -21.184841218701195,
                      -62.069991345971154, -43.868924783714164, -24.682337470629072, -2.8605529514137373,
                      65.39162073164252,
                      2.6654994832190937, 23.60580815931415, 13.846698992449433, -41.45381813820245, -76.7118669691122,
                      40.566665904615746, 22.28454884887448, -55.31708080994516, -76.649068909635, 40.966439161432476,
                      -3.0455255815577402, 3.119008384655956, 18.342768255788243, -20.144695942649946, 8.54936385804288,
                      50.45305033701291, 23.2263485421784, 10.68869991058412, 74.77290130427247, 33.82014641772588,
                      -19.74543928622861, -43.37360584484172, 79.02166733921979, -45.92410252364756, -44.01344981695157,
                      44.109743914203506, -77.20689956137252, -72.65296438262618, 46.613878010132, -14.343495951611033])

    def obj_func(self, solution):
        solution2 = solution - SumOfSquaresShifted.shift

        sum = 0
        for i, value in enumerate(solution2):
            sum += i * (value ** 2)
        return sum
